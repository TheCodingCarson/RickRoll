<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Downbad Gamer Fix?</title>
</head>
<style>
#container {
	position: fixed;
	top: 0px;
	left: 0px;
	width: 100%;
	height: 100%;
	margin: 0px;
	padding: 0px;
	z-index: 10000;
	background: black;
}
  
#blocker {
	position: fixed;
	top: 0px;
	left: 0px;
	width: 100%;
	height: 100%;
	margin: 0px;
	padding: 0px;
	z-index: 99999;
}

#fakeEndRickRollPrompt {
	position: absolute;
	top: 15px;
	left: 42vw;
	z-index: 100000;
	border: 3px solid white;
	border-radius: 10px;
	padding: 10px;
	text-align: center;
	font-weight: bold;
	clear: both;
	background: white;
}

#hopeYouHadFun {
	position: absolute;
	top: 44vh;
	left: 42vw;
	z-index: 10001;
	border: 3px solid black;
	border-radius: 10px;
	padding: 25px;
	text-align: center;
	font-weight: bold;
	clear: both;
	background: white;
}
</style>
<body>
    <!-- Main Container -->
    <div id="container" {width: 100%; height: 100%;}>
	
		<!-- YouTube Embed -->
		<div id="player"></div>
	  
		<!-- YouTube Embed -->
		<div id="blocker"></div>
		
		<!-- Fake "End" Popup -->
		<div id="fakeEndRickRollPrompt" style="display: none;">
		<p>Would you like to end the Rick Roll Now?</p>
		<button id="fakeEndRickRollButton">End Rick Roll</button>
		<button id="fakeKeepRickRollButton">Keep Ricking and Rolling Me Brother</button>
		</div>
		
		<div id="hopeYouHadFun" style="display: none;">
			<p>Hope you had a fun time being Rick Rolled!</p>
			<p>And just remember 9+10=21!</p>
			<button onclick="location.href='https://sweaty.cc'" type="button">Sweaty Gamers Discord Server</button>
			<button onclick="location.href='https://github.com/TheCodingCarson/RickRoll'" type="button">See the source code on Github</button>
		</div>
	
	</div>
    

    <script>
		// -- Global Variables --
		var player;                                                     // YouTube Player
		var ended = false;                                              // Rick Roll Ended
		const playerDiv = document.querySelector('player');             // YouTube Player Div
		const blocker = document.querySelector('blocker');              // Blocker Overlay
		const popup = document.getElementById('fakeEndRickRollPrompt'); // Popup Prompt
	
		// Loads the IFrame Player API
		var tag = document.createElement('script');
		tag.src = "https://www.youtube.com/iframe_api";
		var firstScriptTag = document.getElementsByTagName('script')[0];
		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

		// Creates an iframe
		function onYouTubeIframeAPIReady() {
			player = new YT.Player('player', {
				height: '100%',
				width: '100%',
				videoId: 'xm3YgoEiEDc', // 10-Hour Rickroll video ;)
				playerVars: {
					'playsinline': 1, // Ensuring fullscreen doesn't block overlay
					'autoplay': 1,    // Auto play video on load
					'mute': 1,        // Start Muted (Allows Autoplay without browser Restriction)
					'loop': 1,        // Loop Video (Why is the user here for 10 hours?)
					'controls': 0,    // Remove the Player Controls
					'frameborder': 0, // 
					'disablekb': 1,
					'enablejsapi': 1,
					'iv_load_policy': 3,
					'rel': 0,
					'referrerpolicy': "strict-origin-when-cross-origin",
					'origin': "downbad.sweaty.cc",
					'allow': "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
				},
				events: {
					'onReady': onPlayerReady
				}
			});
		}

		// Start the Rick Roll
		function onPlayerReady(event) {
			event.target.playVideo();            // Play Video
			// Autoplay Start - Bypass Autoplay Restrictions
			event.target.unMute();               // Unmute Video
			event.target.setVolume(100);         // Set Volume to 100%
			document.title = "Get Rick Rolled!"; // Change Website Title
		}

		// On Click Go Into Fullscreen - Blocker
		blocker.addEventListener("click", function(event) {
			event.preventDefault();
			enableFullScreen();
		});
		
		// On Click Go Into Fullscreen - Fake Prompt
		popup.addEventListener("click", function(event) {
			event.preventDefault();
			enableFullScreen();
		});
		
		// Enable fullscreen if any key other then "R" is pressed - Blocker
		blocker.addEventListener('keydown', function(event) {
			
			// Check to make sure still ricking the roll
			if (!ended) {
				// Prevent the default action for all key presses
				event.preventDefault();
			
				if (event.key === 'R' || event.key === 'r') {
					// End Rick Roll when "R" is pressed
					endRickRoll()
				} else {
					// If any other key is pressed open Fullscreen
					enableFullScreen();
				}
			}
		});
		
		// Enable fullscreen if any key other then "R" is pressed - Fake Prompt
		popup.addEventListener('keydown', function(event) {
			// Prevent the default action for all key presses
			event.preventDefault();
		
			if (event.key === 'R' || event.key === 'r') {
				// End Rick Roll when "R" is pressed
				endRickRoll()
			} else {
				// If any other key is pressed open Fullscreen
				enableFullScreen();
			}
		});
		
		// Prevent the context menu from appearing on right-click anywhere in the document
		document.addEventListener('contextmenu', function(event) {
			event.preventDefault();
		});
		
		// Extra prevention of the context menu - Blocker
		blocker.addEventListener('contextmenu', function(event) {
			event.preventDefault();
		});
		
		// Extra prevention of the context menu - Fake Popup
		popup.addEventListener('contextmenu', function(event) {
			event.preventDefault();
		});

		// Function to enable fullscreen
		function enableFullScreen() {
			if (blocker.requestFullscreen) {
				blocker.requestFullscreen();
			} else if (blocker.mozRequestFullScreen) { // Firefox
				blocker.mozRequestFullScreen();
			} else if (blocker.webkitRequestFullscreen) { // Chrome, Safari and Opera
				blocker.webkitRequestFullscreen();
			} else if (blocker.msRequestFullscreen) { // IE/Edge
				blocker.msRequestFullscreen();
			}
		}
		
		// Function to exit fullscreen
		function exitFullScreen() {
			if (document.exitFullscreen) {
				document.exitFullscreen();
			} else if (document.webkitExitFullscreen) { // Chrome, Safari, and Opera
				document.webkitExitFullscreen();
			} else if (document.mozCancelFullScreen) { // Firefox
				document.mozCancelFullScreen();
			} else if (document.msExitFullscreen) { // IE/Edge
				document.msExitFullscreen();
			}
		}
		
		// Adding listener to monitor full-screen changes
		document.addEventListener('fullscreenchange', function() {
			if (!document.fullscreenElement) {
				// Show a fake "End Rick Roll Prompt"
				popup.style.display = 'block';
			}
		});
		
		// Re-enter full screen when the user clicks the "End Rick Roll" button
		document.getElementById('fakeEndRickRollButton').addEventListener('click', function() {
			// Enable full-screen mode when the button is clicked
			enableFullScreen();

			// Hide the prompt after re-entering full-screen
			popup.style.display = 'none';
		});
		
		// Re-enter full screen when the user clicks the "Keep Rick Roll" button
		document.getElementById('fakeKeepRickRollButton').addEventListener('click', function() {
			// Enable full-screen mode when the button is clicked
			enableFullScreen();

			// Hide the prompt after re-entering full-screen
			popup.style.display = 'none';
		});
		
		// -- Actually End Rick Roll --
		function endRickRoll() {
			ended = true;                                                     // Set Ended variable
			exitFullScreen();                                                 // Exit Fullscreen
			blocker.style.display = 'none';                                   // Remove Blocker
			playerDiv.style.display = 'none';                                 // Remove YouTube Embed
			popup.style.display = 'none';                                     // Remove Popup
			document.getElementById('container').style.background = 'white';  // Set main container background to white
			document.getElementById('hopeYouHadFun').style.display = 'block'; // Show Ending text
			document.title = "Sorry - Classic Rick Roll";                     // Change Website Title
		}
	</script>
</body>
</html>
